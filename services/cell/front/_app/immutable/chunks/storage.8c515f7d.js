import{w as I}from"./index.25bfcd07.js";var d={local:{},session:{}};function L(e){return e==="local"?localStorage:sessionStorage}function T(e,S,r){var f,g,w,v;const i=(f=r==null?void 0:r.serializer)!=null?f:JSON,t=(g=r==null?void 0:r.storage)!=null?g:"local",p=(w=r==null?void 0:r.syncTabs)!=null?w:!0,E=(v=r==null?void 0:r.onError)!=null?v:n=>console.error(`Error when writing value from persisted store "${e}" to ${t}`,n),m=typeof window<"u"&&typeof document<"u",l=m?L(t):null;function b(n,a){try{l==null||l.setItem(n,i.stringify(a))}catch(c){E(c)}}function _(){const n=l==null?void 0:l.getItem(e);return n?i.parse(n):S}if(!d[t][e]){const n=_(),a=I(n,o=>{if(m&&t=="local"&&p){const u=s=>{s.key===e&&o(s.newValue?i.parse(s.newValue):null)};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)}}),{subscribe:c,set:h}=a;d[t][e]={set(o){h(o),b(e,o)},update(o){return a.update(u=>{const s=o(u);return b(e,s),s})},subscribe:c}}return d[t][e]}const z=T("user",{username:null,uid:null});export{z as u};
